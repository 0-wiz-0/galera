

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>3.2. Resetting the Quorum &mdash; galera 1.0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="galera 1.0.1 documentation" href="index.html" />
    <link rel="up" title="3. Administration Guide" href="userguide.html" />
    <link rel="next" title="3.3. Monitoring the Cluster" href="monitoringthecluster.html" />
    <link rel="prev" title="3.1. Node Provisioning and Recovery" href="nodeprovisioning.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="monitoringthecluster.html" title="3.3. Monitoring the Cluster"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="nodeprovisioning.html" title="3.1. Node Provisioning and Recovery"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">galera 1.0.1 documentation</a> &raquo;</li>
          <li><a href="userguide.html" accesskey="U">3. Administration Guide</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="resetting-the-quorum">
<h1>3.2. Resetting the Quorum<a class="headerlink" href="#resetting-the-quorum" title="Permalink to this headline">Â¶</a></h1>
<p id="id1">In the case of a network failure, failure of more than half
of the cluster nodes, or a split-brain situation, your node(s)
may no longer deem that they are part of the primary component
of the cluster. In other words, they suspect that there is
another primary component in the cluster which they have no
connection to.</p>
<p>If this is the case, all nodes return an <em>Unknown command</em> to
every query.</p>
<p>If you know that no other nodes of your cluster play the primary
component role, you can reset the quorum by rebootstrapping the
primary component as follows:</p>
<ol class="arabic">
<li><p class="first">Choose the most up-to-date node. You can check this by reading
the output command:</p>
<p><tt class="docutils literal"><span class="pre">SHOW</span> <span class="pre">STATUS</span> <span class="pre">LIKE</span> <span class="pre">'wsrep_last_committed'</span></tt></p>
<p>Choose the node with the highest value.</p>
</li>
<li><p class="first">Once you have chosen the most up-to-date node, run the
command below on it:</p>
<p><tt class="docutils literal"><span class="pre">SET</span> <span class="pre">GLOBAL</span> <span class="pre">wsrep_provider_options='pc.bootstrap=yes'</span></tt></p>
</li>
<li><p class="first">The quorum is reset and:</p>
<ul class="simple">
<li>The component with this node as a member will become
the primary component</li>
<li>All nodes the component will synchronize to the most
up-to-date node, and</li>
<li>The cluster starts to accept SQL requests again.</li>
</ul>
</li>
</ol>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="nodeprovisioning.html"
                        title="previous chapter">3.1. Node Provisioning and Recovery</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="monitoringthecluster.html"
                        title="next chapter">3.3. Monitoring the Cluster</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/quorumreset.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="monitoringthecluster.html" title="3.3. Monitoring the Cluster"
             >next</a> |</li>
        <li class="right" >
          <a href="nodeprovisioning.html" title="3.1. Node Provisioning and Recovery"
             >previous</a> |</li>
        <li><a href="index.html">galera 1.0.1 documentation</a> &raquo;</li>
          <li><a href="userguide.html" >3. Administration Guide</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Tommi Takkunen-Lauri.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>