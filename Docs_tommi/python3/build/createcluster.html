

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>2.6. Creating a Cluster &mdash; galera 1.0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="galera 1.0.1 documentation" href="index.html" />
    <link rel="up" title="2. Getting Started" href="gettingstarted.html" />
    <link rel="next" title="3. Administration Guide" href="userguide.html" />
    <link rel="prev" title="2.5. Configuring Galera Cluster" href="configuration.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="userguide.html" title="3. Administration Guide"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="configuration.html" title="2.5. Configuring Galera Cluster"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">galera 1.0.1 documentation</a> &raquo;</li>
          <li><a href="gettingstarted.html" accesskey="U">2. Getting Started</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="creating-a-cluster">
<h1>2.6. Creating a Cluster<a class="headerlink" href="#creating-a-cluster" title="Permalink to this headline">¶</a></h1>
<p id="id1">To create and bootstrap a new cluster, you must set up the group
communication structure for the cluster nodes. Proceed as follows:</p>
<ol class="arabic">
<li><p class="first">Power up the servers that will join the cluster. Do not
start the <em>mysqld</em> servers yet.</p>
</li>
<li><p class="first">Define an empty cluster address URL for the first <em>mysqld</em>
server. Specify this <abbr title="Uniform Resource Locator">URL</abbr>
either in the <em>my.cnf</em> configuration
file or by issuing the command below:</p>
<p><tt class="docutils literal"><span class="pre">$</span> <span class="pre">mysqld</span> <span class="pre">--wsrep_cluster_address=gcomm://</span></tt></p>
<p>This command implies to the starting <em>mysqld</em> server that
there is no existing cluster to connect to, and the server
will create a new history <abbr title="Universally Unique Identifier">UUID</abbr>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Only use an empty <em>gcomm</em> address when you want to
create a new cluster. Never use it when you want to reconnect
to an existing one.</p>
</div>
</li>
<li><p class="first">Start the first <em>mysqld</em> server with an empty cluster
address URL.</p>
</li>
<li><p class="first">To add the second node to the cluster, see
chapter <a class="reference internal" href="#id2">Adding Nodes to a Cluster</a> below.</p>
</li>
</ol>
<div class="section" id="adding-nodes-to-a-cluster">
<h2>2.6.1. Adding Nodes to a Cluster<a class="headerlink" href="#adding-nodes-to-a-cluster" title="Permalink to this headline">¶</a></h2>
<span class="target" id="id2"></span><p id="index-0">To add a new node to an existing cluster, proceed as follows:</p>
<ol class="arabic">
<li><p class="first">Power up the server that will join the cluster. Do not
start the <em>mysqld</em> server yet.</p>
</li>
<li><p class="first">Define a <abbr title="Uniform Resource Locator">URL</abbr> address to
one of the existing cluster nodes for the new node by issuing
the command below:</p>
<p><tt class="docutils literal"><span class="pre">$</span> <span class="pre">mysqld</span> <span class="pre">--wsrep_cluster_address=gcomm://192.168.0.1</span></tt></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can also use <abbr title="Domain Name System">DNS</abbr> addresses.</p>
</div>
<p>This command implies to the starting <em>mysqld</em> server that
there an existing cluster to connect to.</p>
</li>
<li><p class="first">(Optional) If the node will be part of a weighted quorum, set the
initial node weight to zero. In this way, it can be guaranteed
that if the joining node fails before it gets synchronized,
it does not have effect in the quorum computation that follows.</p>
</li>
<li><p class="first">Start the <em>mysqld</em> server.</p>
</li>
<li><p class="first">The new node connects to the defined cluster member. It will
automatically retrieve the cluster map and reconnect to the
rest of the nodes, if any.</p>
</li>
</ol>
<p>As soon as all cluster members agree on the membership, state
exchange will be initiated. In state exchange, the new node is
informed of the cluster state. If the node state differs from
the cluster state (which is normally the case), the new node
requests for a state snapshot from the cluster and installs
it. After this, the new node is ready for use.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">2.6. Creating a Cluster</a><ul>
<li><a class="reference internal" href="#adding-nodes-to-a-cluster">2.6.1. Adding Nodes to a Cluster</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="configuration.html"
                        title="previous chapter">2.5. Configuring Galera Cluster</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="userguide.html"
                        title="next chapter">3. Administration Guide</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/createcluster.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="userguide.html" title="3. Administration Guide"
             >next</a> |</li>
        <li class="right" >
          <a href="configuration.html" title="2.5. Configuring Galera Cluster"
             >previous</a> |</li>
        <li><a href="index.html">galera 1.0.1 documentation</a> &raquo;</li>
          <li><a href="gettingstarted.html" >2. Getting Started</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Tommi Takkunen-Lauri.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>