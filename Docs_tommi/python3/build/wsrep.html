

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Write Set Replication &mdash; galera 1.0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="galera 1.0.1 documentation" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li><a href="index.html">galera 1.0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="write-set-replication">
<h1>Write Set Replication<a class="headerlink" href="#write-set-replication" title="Permalink to this headline">¶</a></h1>
<p>Write sets budle database writes into <em>write set</em> messages.
Replicating these sets over database nodes is called write set
replication (wsrep).</p>
<p>Galera write set replication consists of two software entities:
- wsrep Application Programming Interface (API)
- wsrep provider</p>
<p>The roles of wsrep API and wsrep provider in the replication
architecture are depicted in the figure below:</p>
<div class="figure">
<img alt="_images/replicationarchitecture.png" src="_images/replicationarchitecture.png" />
<p class="caption"><em>wsrep API and wsrep Provider in the Replication Architecture</em></p>
</div>
<div class="section" id="wsrep-api">
<h2>wsrep API<a class="headerlink" href="#wsrep-api" title="Permalink to this headline">¶</a></h2>
<p>wsrep API is a generic replication plugin interface for databases.
The API defines a set of application callbacks and replication
library calls.</p>
<p>The wsrep API is used in a replication model where an application, such
as a database server, has a state. In practice, the state refers to the
contents of the database. When the database is used, clients modify the
database contents and the database state changes. This changing of the
state is represented as a series of atomic changes (transactions). In
a database cluster, all nodes always have the same state, which they
synchronize with each other by replicating and applying state changes
in the same serial order.</p>
<p>To keep the state identical on all nodes, the wsrep API uses a global
transaction ID (GTID), which is used to both:</p>
<ul class="simple">
<li>Identify the state change</li>
<li>Identify the state itself by the ID of the last state change</li>
</ul>
<p>The GTID consists of:</p>
<ul class="simple">
<li>A state UUID, which uniquely identifies the state and the
sequence of changes it undergoes</li>
<li>An ordinal sequence number (seqno, a 64-bit signed integer)
to denote the position of the change in the sequence</li>
</ul>
<p>By using the GTID, you can
- Compare the application states
- Establish the order of state changes
- Determine whether the change was applied or not
- Whether the change is applicable at all to a given state (in short, whether it is all-powerful)</p>
<p>In a human-readable format, the GTID might look like this:</p>
<div class="highlight-python"><pre>45eec521-2f34-11e0-0800-2a36050b826b:94530586304</pre>
</div>
</div>
<div class="section" id="galera-wsrep-provider">
<h2>Galera wsrep Provider<a class="headerlink" href="#galera-wsrep-provider" title="Permalink to this headline">¶</a></h2>
<p><em>Galera wsrep Provider</em> implements the <em>wsrep API</em> within the Galera library.
provides wsrep API calls. This library
can be dynamically loaded by any wsrep-enabled application. Galera is a
wsrep provider that implements true multi-master synchronous replication.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Write Set Replication</a><ul>
<li><a class="reference internal" href="#wsrep-api">wsrep API</a></li>
<li><a class="reference internal" href="#galera-wsrep-provider">Galera wsrep Provider</a></li>
</ul>
</li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/wsrep.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li><a href="index.html">galera 1.0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Tommi Takkunen-Lauri.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>