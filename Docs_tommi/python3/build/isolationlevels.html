

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>1.7. Isolation Levels &mdash; galera 1.0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="galera 1.0.1 documentation" href="index.html" />
    <link rel="up" title="1. Galera Technical Description" href="technicaldescription.html" />
    <link rel="next" title="1.8. Weighted Quorum" href="weightedquorum.html" />
    <link rel="prev" title="1.6. Node States" href="nodestates.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="weightedquorum.html" title="1.8. Weighted Quorum"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="nodestates.html" title="1.6. Node States"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">galera 1.0.1 documentation</a> &raquo;</li>
          <li><a href="technicaldescription.html" accesskey="U">1. Galera Technical Description</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="isolation-levels">
<h1>1.7. Isolation Levels<a class="headerlink" href="#isolation-levels" title="Permalink to this headline">¶</a></h1>
<p id="id1">Isolation guarantees that transactions are processed in a
reliable manner. To be more specific, it ensures that concurrently
running transactions do not interfere with each other. In this way,
isolation ensures data consistency. If the transactions were not
isolated, one transaction could modify data that other transactions
are reading. This would lead to data inconsistency.</p>
<p>The four isolation levels are, from lowest to highest:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">READ-UNCOMMITTED</span></tt>—On this isolation level, transactions can
see changes to data made by other transactions that are not committed
yet. In other words, transactions can read data that may not eventually
exist, as the other transactions can always roll-back the changes
without commit. This is called a <em>dirty read</em>. <tt class="docutils literal"><span class="pre">READ-UNCOMMITTED</span></tt>
has actually no real isolation at all.</li>
<li><tt class="docutils literal"><span class="pre">READ-COMMITTED</span></tt>—On this isolation level, dirty reads are
impossible, as uncommitted changes are invisible to other transactions
until the transaction is committed. However, at this isolation level,
<tt class="docutils literal"><span class="pre">SELECT</span></tt> clauses use their own snapshots of committed data, committed
before the <tt class="docutils literal"><span class="pre">SELECT</span></tt> clause was executed. As a result, the same
<tt class="docutils literal"><span class="pre">SELECT</span></tt> clause, when run multiple times within the same transaction,
can return different result sets. This is called a <em>non-repeatable read</em>.</li>
<li><tt class="docutils literal"><span class="pre">REPEATABLE-READ</span></tt>—On this isolation level, non-repeatable reads
are impossible, as the snapshot for the <tt class="docutils literal"><span class="pre">SELECT</span></tt> clause is taken the
first time the <tt class="docutils literal"><span class="pre">SELECT</span></tt> clause is executed during the transaction.
This snapshot is used throughout the entire transaction for this
<tt class="docutils literal"><span class="pre">SELECT</span></tt> clause and it always returns the same result set. This level
does not take into account changes to data made by other transactions,
regardless of whether they have been committed or not. In this way,
reads are always repeatable.</li>
<li><tt class="docutils literal"><span class="pre">SERIALIZABLE</span></tt>—This isolation level place locks on all records
that are accessed within a transaction. <tt class="docutils literal"><span class="pre">SERIALIZABLE</span></tt> also locks
the resource in a way that records cannot be appended to the table being
operated on by the transaction. This level prevents a phenomenon known
as a <em>phantom read</em>. A phantom read occurs when, within a transaction,
two identical queries are executed, and the rows returned by the second
query are different from the first.</li>
</ul>
<p>Galera uses transaction isolation on two levels:</p>
<ul>
<li><p class="first">Locally, that is, on each node, transaction isolation works as
with native InnoDB. You can use all levels. The default isolation
level for InnoDB is <tt class="docutils literal"><span class="pre">REPEATABLE-READ</span></tt>.</p>
</li>
<li><p class="first">At the cluster level, between transactions processing at separate
nodes, Galera implements a transaction level called <tt class="docutils literal"><span class="pre">SNAPSHOT</span> <span class="pre">ISOLATION</span></tt>.
The <tt class="docutils literal"><span class="pre">SNAPSHOT</span> <span class="pre">ISOLATION</span></tt> level is between the <tt class="docutils literal"><span class="pre">REPEATABLE</span> <span class="pre">READ</span></tt>
and <tt class="docutils literal"><span class="pre">SERIALIZABLE</span></tt> levels.</p>
<p>The <tt class="docutils literal"><span class="pre">SERIALIZABLE</span></tt> transaction isolation level cannot be
guaranteed in a multi-master use case, as Galera replication
does not carry a transaction read set. Also, the <tt class="docutils literal"><span class="pre">SERIALIZABLE</span></tt>
transaction isolation level is vulnerable for multi-master
conflicts. It holds read locks and any replicated write to a
read locked row will cause the transaction to abort. Hence,
it is recommended not to use it in a Galera cluster.</p>
</li>
</ul>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="nodestates.html"
                        title="previous chapter">1.6. Node States</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="weightedquorum.html"
                        title="next chapter">1.8. Weighted Quorum</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/isolationlevels.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="weightedquorum.html" title="1.8. Weighted Quorum"
             >next</a> |</li>
        <li class="right" >
          <a href="nodestates.html" title="1.6. Node States"
             >previous</a> |</li>
        <li><a href="index.html">galera 1.0.1 documentation</a> &raquo;</li>
          <li><a href="technicaldescription.html" >1. Galera Technical Description</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Tommi Takkunen-Lauri.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>