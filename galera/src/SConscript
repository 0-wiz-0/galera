
env = DefaultEnvironment()

env.Replace(CXXFLAGS = '-DGALERA_LOG_H_ENABLE_CXX -Wno-long-long -Wno-deprecated -Weffc++ -ansi')

env.SharedLibrary('mmgalera', [
        'galera_info.c',
        'galera_job_queue.c',
        'galera_options.c',
        'galera_state.c',
        'galera_status.c',
        'mm_galera.c'
])

env.StaticLibrary('galera++', [
        'mapped_buffer.cpp',
        'write_set.cpp',
        'wsdb.cpp',
        'certification.cpp',
        'galera_wsdb.cpp',
        'galera_certification.cpp'
])

env.SharedLibrary('galera++', [
        'mapped_buffer.cpp',
        'write_set.cpp',
        'wsdb.cpp',
        'certification.cpp',
        'galera_wsdb.cpp',
        'galera_certification.cpp'
])


msenv = env.Clone()
msenv.Append(CPPFLAGS = ' -DGALERA_MASTER_SLAVE')
msenv.Replace(SHOBJPREFIX = 'libmsgalera++-')
msenv.SharedLibrary('msgalera++', [
        'galera_info.c',
        'galera_job_queue.c',
        'galera_options.c',
        'galera_state.c',
        'galera_status.c',
        'mm_galera_refact.cpp'
])

mmenv = env.Clone()
mmenv.Append(CPPFLAGS = ' -DGALERA_MULTIMASTER')
mmenv.Replace(SHOBJPREFIX = 'libmmgalera++-')
mmenv.SharedLibrary('mmgalera++', [
        'galera_info.c',
        'galera_job_queue.c',
        'galera_options.c',
        'galera_state.c',
        'galera_status.c',
        'mm_galera_refact.cpp'
])
