
env = DefaultEnvironment().Clone()

env.Replace(CXXFLAGS = env['CXXFLAGS'].replace('-pedantic',''))
env.Append(CXXFLAGS = ' -DGALERA_LOG_H_ENABLE_CXX')


env.SharedLibrary('mmgalera', [
        'galera_info.c',
        'galera_job_queue.c',
        'galera_options.c',
        'galera_state.c',
        'galera_status.c'
])

env.StaticLibrary('galera++', [
        'mapped_buffer.cpp',
        'write_set.cpp',
        'trx_handle.cpp',
        'wsdb.cpp',
        'certification.cpp',
        'galera_service_thd.cpp',
])

env.SharedLibrary('galera++', [
        'mapped_buffer.cpp',
        'write_set.cpp',
        'trx_handle.cpp',
        'wsdb.cpp',
        'certification.cpp',
        'galera_service_thd.cpp',
])


mmenv = env.Clone()
mmenv.Append(CPPFLAGS = ' -DGALERA_MULTIMASTER')
mmenv.Replace(SHOBJPREFIX = 'libmmgalera++-')
mmenv.SharedLibrary('mmgalera++', [
        'galera_info.c',
        'galera_job_queue.c',
        'galera_options.c',
        'galera_state.c',
        'galera_status.c',
        'mm_galera_refact.cpp'
])
